'use strict';

// 表单格式序列化为对象
function formConverttoObject(form) {
  var arr = form.split(';');
  var obj = arr.reduce(function (pre, next) {
    var key = next.split('=')[0];
    var val = next.split('=')[1];
    pre[key] = val;
    return pre;
  }, {});
  return obj;
}

// 对象序列化为表单格式
function objectConverttoForm(obj) {
  var str = '';
  var toString = Object.prototype.toString;
  for (var key in obj) {
    if (toString.call(obj[key]) === '[object Object]' || toString.call(obj[key]) === '[object Array]') {
      str += objectConverttoForm(obj[key]);
    } else {
      str += obj[key];
    }
  }
}

// 获取本地存储中的数据
function getStorageData(target) {
  var res = wx.getStorageInfoSync();
  if (res.keys.indexOf(target) >= 0) {
    var data = wx.getStorageSync(target);
    return data;
  } else {
    return {};
  }
}

// 将数据写入本地存储中
function setStorageData(target, data) {
  wx.setStorage({ key: target, data: data });
}

// 比较两个对象 是否内容相同
function isEqual(obj1, obj2) {
  var toString = Object.prototype.toString;
  for (var key in obj1) {
    var a = obj1[key];
    var b = obj2[key];
    // 判断key是否相同
    if (!b && a) {
      return fales;
    }
    // 判断值的类型是否相同
    if (toString.call(a) !== toString.call(b)) {
      return fales;
    }
    // 引用类型则递归判断
    if (toString.call(a) === '[object Object]' || toString.call(a) === '[object Array]') {
      return isEqual(a, b);
    }
    // 简单类型直接比较值
    else {
        // 排除特殊情况： 0 === -0 为true
        if (a === b) return a !== 0 || 1 / a === 1 / b;
        // 如果有一个是null或undefined，则只有俩都是null，或俩都是undefined，才返回真
        if (a == null || b == null) return a === b;
        var className = toString.call(a);
        switch (className) {
          case '[object RegExp]':
          case '[object String]':
            return '' + a === '' + b;
          case '[object Number]':
            // 特殊情况：NaN === NaN 为false
            if (+a !== +a) return +b !== +b;
            return +a === 0 ? 1 / +a === 1 / b : +a === +b;
          case '[object Date]':
          case '[object Boolean]':
            return +a === +b;
          case '[object Symbol]':
            return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);
        }
      }
  }
  return true;
}
module.exports = {
  formConverttoObject: formConverttoObject,
  objectConverttoForm: objectConverttoForm,
  getStorageData: getStorageData,
  setStorageData: setStorageData,
  isEqual: isEqual
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwuanMiXSwibmFtZXMiOlsiZm9ybUNvbnZlcnR0b09iamVjdCIsImZvcm0iLCJhcnIiLCJzcGxpdCIsIm9iaiIsInJlZHVjZSIsInByZSIsIm5leHQiLCJrZXkiLCJ2YWwiLCJvYmplY3RDb252ZXJ0dG9Gb3JtIiwic3RyIiwidG9TdHJpbmciLCJPYmplY3QiLCJwcm90b3R5cGUiLCJjYWxsIiwiZ2V0U3RvcmFnZURhdGEiLCJ0YXJnZXQiLCJyZXMiLCJ3eCIsImdldFN0b3JhZ2VJbmZvU3luYyIsImtleXMiLCJpbmRleE9mIiwiZGF0YSIsImdldFN0b3JhZ2VTeW5jIiwic2V0U3RvcmFnZURhdGEiLCJzZXRTdG9yYWdlIiwiaXNFcXVhbCIsIm9iajEiLCJvYmoyIiwiYSIsImIiLCJmYWxlcyIsImNsYXNzTmFtZSIsIlN5bWJvbFByb3RvIiwidmFsdWVPZiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQ0E7QUFDQSxTQUFTQSxtQkFBVCxDQUE2QkMsSUFBN0IsRUFBbUM7QUFDakMsTUFBSUMsTUFBTUQsS0FBS0UsS0FBTCxDQUFXLEdBQVgsQ0FBVjtBQUNBLE1BQUlDLE1BQU1GLElBQUlHLE1BQUosQ0FBVyxVQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBZTtBQUNsQyxRQUFNQyxNQUFNRCxLQUFLSixLQUFMLENBQVcsR0FBWCxFQUFnQixDQUFoQixDQUFaO0FBQ0EsUUFBTU0sTUFBTUYsS0FBS0osS0FBTCxDQUFXLEdBQVgsRUFBZ0IsQ0FBaEIsQ0FBWjtBQUNBRyxRQUFJRSxHQUFKLElBQVdDLEdBQVg7QUFDQSxXQUFPSCxHQUFQO0FBQ0QsR0FMUyxFQUtQLEVBTE8sQ0FBVjtBQU1BLFNBQU9GLEdBQVA7QUFDRDs7QUFFRDtBQUNBLFNBQVNNLG1CQUFULENBQTZCTixHQUE3QixFQUFrQztBQUNoQyxNQUFJTyxNQUFNLEVBQVY7QUFDQSxNQUFJQyxXQUFXQyxPQUFPQyxTQUFQLENBQWlCRixRQUFoQztBQUNBLE9BQUssSUFBSUos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LENBQXpCLENBQXZDO0FBWko7QUFjRDtBQUNGO0FBQ0QsU0FBTyxJQUFQO0FBQ0Q7QUFDREssT0FBT0MsT0FBUCxHQUFpQjtBQUNmckMsMENBRGU7QUFFZlUsMENBRmU7QUFHZk0sZ0NBSGU7QUFJZlMsZ0NBSmU7QUFLZkU7QUFMZSxDQUFqQiIsImZpbGUiOiJ1dGlsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8vIOihqOWNleagvOW8j+W6j+WIl+WMluS4uuWvueixoVxyXG5mdW5jdGlvbiBmb3JtQ29udmVydHRvT2JqZWN0KGZvcm0pIHtcclxuICBsZXQgYXJyID0gZm9ybS5zcGxpdCgnOycpXHJcbiAgbGV0IG9iaiA9IGFyci5yZWR1Y2UoKHByZSwgbmV4dCkgPT4ge1xyXG4gICAgY29uc3Qga2V5ID0gbmV4dC5zcGxpdCgnPScpWzBdO1xyXG4gICAgY29uc3QgdmFsID0gbmV4dC5zcGxpdCgnPScpWzFdO1xyXG4gICAgcHJlW2tleV0gPSB2YWw7XHJcbiAgICByZXR1cm4gcHJlO1xyXG4gIH0sIHt9KVxyXG4gIHJldHVybiBvYmpcclxufVxyXG5cclxuLy8g5a+56LGh5bqP5YiX5YyW5Li66KGo5Y2V5qC85byPXHJcbmZ1bmN0aW9uIG9iamVjdENvbnZlcnR0b0Zvcm0ob2JqKSB7XHJcbiAgbGV0IHN0ciA9ICcnXHJcbiAgbGV0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xyXG4gIGZvciAobGV0IGtleSBpbiBvYmopIHtcclxuICAgIGlmICh0b1N0cmluZy5jYWxsKG9ialtrZXldKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgfHwgdG9TdHJpbmcuY2FsbChvYmpba2V5XSkgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcclxuICAgICAgc3RyICs9IG9iamVjdENvbnZlcnR0b0Zvcm0ob2JqW2tleV0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdHIgKz0gb2JqW2tleV1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIOiOt+WPluacrOWcsOWtmOWCqOS4reeahOaVsOaNrlxyXG5mdW5jdGlvbiBnZXRTdG9yYWdlRGF0YSh0YXJnZXQpIHtcclxuICBsZXQgcmVzID0gd3guZ2V0U3RvcmFnZUluZm9TeW5jKClcclxuICBpZiAocmVzLmtleXMuaW5kZXhPZih0YXJnZXQpID49IDApIHtcclxuICAgIGxldCBkYXRhID0gd3guZ2V0U3RvcmFnZVN5bmModGFyZ2V0KVxyXG4gICAgcmV0dXJuIGRhdGFcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHt9XHJcbiAgfVxyXG59XHJcblxyXG4vLyDlsIbmlbDmja7lhpnlhaXmnKzlnLDlrZjlgqjkuK1cclxuZnVuY3Rpb24gc2V0U3RvcmFnZURhdGEodGFyZ2V0LCBkYXRhKSB7XHJcbiAgd3guc2V0U3RvcmFnZSh7a2V5OiB0YXJnZXQsIGRhdGE6IGRhdGF9KVxyXG59XHJcblxyXG4vLyDmr5TovoPkuKTkuKrlr7nosaEg5piv5ZCm5YaF5a6555u45ZCMXHJcbmZ1bmN0aW9uIGlzRXF1YWwob2JqMSwgb2JqMikge1xyXG4gIGxldCB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcclxuICBmb3IgKGxldCBrZXkgaW4gb2JqMSkge1xyXG4gICAgbGV0IGEgPSBvYmoxW2tleV1cclxuICAgIGxldCBiID0gb2JqMltrZXldXHJcbiAgICAvLyDliKTmlq1rZXnmmK/lkKbnm7jlkIxcclxuICAgIGlmICghYiAmJiBhKSB7XHJcbiAgICAgIHJldHVybiBmYWxlc1xyXG4gICAgfVxyXG4gICAgLy8g5Yik5pat5YC855qE57G75Z6L5piv5ZCm55u45ZCMXHJcbiAgICBpZiAodG9TdHJpbmcuY2FsbChhKSAhPT0gdG9TdHJpbmcuY2FsbChiKSkge1xyXG4gICAgICByZXR1cm4gZmFsZXNcclxuICAgIH1cclxuICAgIC8vIOW8leeUqOexu+Wei+WImemAkuW9kuWIpOaWrVxyXG4gICAgaWYgKHRvU3RyaW5nLmNhbGwoYSkgPT09ICdbb2JqZWN0IE9iamVjdF0nIHx8IHRvU3RyaW5nLmNhbGwoYSkgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcclxuICAgICAgcmV0dXJuIGlzRXF1YWwoYSwgYilcclxuICAgIH1cclxuICAgIC8vIOeugOWNleexu+Wei+ebtOaOpeavlOi+g+WAvFxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vIOaOkumZpOeJueauiuaDheWGte+8miAwID09PSAtMCDkuLp0cnVlXHJcbiAgICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PT0gMSAvIGJcclxuICAgICAgLy8g5aaC5p6c5pyJ5LiA5Liq5pivbnVsbOaIlnVuZGVmaW5lZO+8jOWImeWPquacieS/qemDveaYr251bGzvvIzmiJbkv6npg73mmK91bmRlZmluZWTvvIzmiY3ov5Tlm57nnJ9cclxuICAgICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBhID09PSBiXHJcbiAgICAgIGxldCBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpXHJcbiAgICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcclxuICAgICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxyXG4gICAgICAgICAgcmV0dXJuICcnICsgYSA9PT0gJycgKyBiXHJcbiAgICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcclxuICAgICAgICAgIC8vIOeJueauiuaDheWGte+8mk5hTiA9PT0gTmFOIOS4umZhbHNlXHJcbiAgICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiXHJcbiAgICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiXHJcbiAgICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XHJcbiAgICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XHJcbiAgICAgICAgICByZXR1cm4gK2EgPT09ICtiXHJcbiAgICAgICAgY2FzZSAnW29iamVjdCBTeW1ib2xdJzpcclxuICAgICAgICAgIHJldHVybiBTeW1ib2xQcm90by52YWx1ZU9mLmNhbGwoYSkgPT09IFN5bWJvbFByb3RvLnZhbHVlT2YuY2FsbChiKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgZm9ybUNvbnZlcnR0b09iamVjdCxcclxuICBvYmplY3RDb252ZXJ0dG9Gb3JtLFxyXG4gIGdldFN0b3JhZ2VEYXRhLFxyXG4gIHNldFN0b3JhZ2VEYXRhLFxyXG4gIGlzRXF1YWxcclxufSJdfQ==